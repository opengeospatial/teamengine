<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7.4 at 2021-02-19 
 | Rendered using Apache Maven Fluido Skin 1.6
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20210219" />
    <meta http-equiv="Content-Language" content="en" />
    <title>TEAM Engine &#x2013; </title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.6.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
      <script type="text/javascript" src="./js/apache-maven-fluido-1.6.min.js"></script>
      </head>
    <body class="topBarDisabled">
      <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><a href="https://github.com/opengeospatial/teamengine" id="bannerLeft"><img src="./images/te-logo-small.png"  alt="TEAM Engine"/></a></div>
        <div class="pull-right"><a href="http://www.osgeo.org/incubator" id="bannerRight"><img src="./images/OSGeo_incubation.png"  alt="OSGeo Incubator"/></a></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2021-02-19<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 5.4.1</li>
      <li class="pull-right"><span class="divider">|</span>
<a href="https://github.com/opengeospatial/teamengine/issues" class="externalLink" title="Issues">Issues</a></li>
      <li class="pull-right"><a href="https://github.com/opengeospatial/teamengine/wiki" class="externalLink" title="Wiki">Wiki</a></li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
<ul class="nav nav-list">
          <li class="nav-header">Getting Started</li>
    <li><a href="index.html" title="Overview"><span class="none"></span>Overview</a>  </li>
    <li><a href="definitions.html" title="Definitions"><span class="none"></span>Definitions</a>  </li>
    <li><a href="installation.html" title="Installation"><span class="none"></span>Installation</a>  </li>
    <li><a href="users.html" title="User's Guide"><span class="none"></span>User's Guide</a>  </li>
    <li><a href="virt-guide.html" title="Virtualization Guide"><span class="none"></span>Virtualization Guide</a>  </li>
          <li class="nav-header">Test Suite Development</li>
    <li><a href="testng-essentials.html" title="Using TestNG, Part 1: Essentials"><span class="none"></span>Using TestNG, Part 1: Essentials</a>  </li>
    <li><a href="testng-cookbook.html" title="Using TestNG, Part 2: Cookbook"><span class="none"></span>Using TestNG, Part 2: Cookbook</a>  </li>
    <li><a href="ctl.html" title="Using CTL Scripts"><span class="none"></span>Using CTL Scripts</a>  </li>
    <li><a href="encoding-conformance-classes.html" title="Encoding Conformance Classes"><span class="none"></span>Encoding Conformance Classes</a>  </li>
    <li class="active"><a href="#"><span class="none"></span>Application Profiles</a>
  </li>
          <li class="nav-header">About</li>
    <li><a href="relnotes.html" title="Release Notes"><span class="none"></span>Release Notes</a>  </li>
  </ul>
          <hr />
          <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
  <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
              </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span9" >
<h1>Developing Tests for Application Profiles</h1>
<div class="sect1">
<h2 id="introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This document offers guidance about how to develop and execute a test suite that verifies
an implementation of some OGC application profile (<a href="#definitions-profiles">[definitions-profiles]</a>) that is based on one or more existing standards.
It is primarily intended for developers and other technical professionals who seek to test
implementations that claim conformance to an OGC profile. For more general information about how to
develop OGC conformance tests, see the <a href="http://opengeospatial.github.io/teamengine/">TEAM Engine documentation site</a>.</p>
</div>
<div class="paragraph">
<p>A profile always has one or more dependencies that must be
heeded when developing an implementation or a conformance test suite. As indicated in <a href="#wms-profiles">[wms-profiles]</a>,
a test suite for any WMS profile will include tests covering one or more conformance classes in
the <a href="https://github.com/opengeospatial/ets-wms13">OGC WMS conformance test suite</a>. The DGIWG profile
requires conformance at the "Queryable WMS" level; the associated test suite also includes
tests that cover the specific requirements of that profile.</p>
</div>
<div class="paragraph">
<p>A test suite for a profile generally selects one or more conformance classes (or levels) (<a href="#definitions-conformance-classes">[definitions-conformance-classes]</a>)
from the relevant set of base specifications; these tests then implicitly become part of the
dependent test suite. The base tests are invoked in the course of running the profile-specific
tests.</p>
</div>
<div class="paragraph">
<p>The source code can be included directly. The manner in which this is done depends on how a test suite is implemented (<a href="#developing-profile-testng">TestNG</a> or <a href="#developing-profile-ctl">CTL</a>). The type of the base test suites determines the type of the profile test suite: if the base test suite is implemented in TestNG the profile test suite must also be implemented in TestNG. The same applies to CTL.</p>
</div>
<div class="paragraph">
<p>A test suite that covers the requirements of an application profile is accessed and executed
just like any other test suite. It appears in the listing of available suites, and it can
be selected and run in the same manner. See the following figure: <a href="#dgiwg-profile">Profile-specific test suites</a>.</p>
</div>
<div id="dgiwg-profile" class="imageblock" style="text-align: center">
<div class="content">
<img src="images/dgiwg-profile.png" alt="Profile-specific test suites"/>
</div>
<div class="title">Figure 1. Profile-specific test suites</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="developing-profile-testng">TestNG</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Most of the OGC conformance test suites developed in recent years are based on the
<a href="http://testng.org/">TestNG framework</a>. The framework provides a simple declarative
mechanism for incorporating tests from other suites in a test suite definition, which
is an XML document that conforms to this <a href="http://testng.org/testng-1.0.dtd.php">document type definition</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>While an XML file (conventionally named testng.xml) is often used to define a test suite,
it is also possible to assemble the runtime definition programmatically using the TestNG
API. The <a href="http://testng.org/javadocs/org/testng/xml/XmlSuite.html">XmlSuite</a> class is the
entry point for doing this (it is correlated with the top-level &lt;suite&gt; tag).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The root &lt;suite&gt; element contains one or more child &lt;test&gt; elements that correspond
to conformance classes. These conformance classes may be drawn from other test suites.
For example, the WFS 2.0 test suite uses two conformance classes from the GML 3.2
test suite. The following listing shows how this dependency is declared. Precondition is
that the base test suites are available in class path. If Maven is used the dependencies
of the base test suites must be included in the pom.xml</p>
</div>
<div class="listingblock">
<div class="title">Importing conformance classes from other test suites</div>
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;suite name="wfs20-1.25" verbose="0" configfailurepolicy="continue"&gt;
  &lt;parameter name="wfs"  value=""/&gt;
  &lt;parameter name="fid"  value=""/&gt;

  &lt;test name="All GML application schemas"&gt;
    &lt;classes&gt;
      &lt;class name="org.opengis.cite.iso19136.general.XMLSchemaTests" /&gt;
      &lt;class name="org.opengis.cite.iso19136.general.GeneralSchemaTests" /&gt;
      &lt;class name="org.opengis.cite.iso19136.general.ModelAndSyntaxTests" /&gt;
      &lt;class name="org.opengis.cite.iso19136.general.ComplexPropertyTests" /&gt;
    &lt;/classes&gt;
  &lt;/test&gt;
  &lt;test name="GML application schemas defining features and feature collections"&gt;
    &lt;classes&gt;
      &lt;class name="org.opengis.cite.iso19136.components.FeatureComponentTests" /&gt;
    &lt;/classes&gt;
  &lt;/test&gt;
  &lt;test name="Simple WFS"&gt;
    &lt;packages&gt;
      &lt;package name="org.opengis.cite.iso19142.simple" /&gt;
    &lt;/packages&gt;
  &lt;/test&gt;
  &lt;!-- remaining WFS tests --&gt;
&lt;/suite&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The &lt;test&gt; sets are run in document order by default, which is usually the preferred behavior.
If any tests fail in a base conformance class, this can cause profile-specific tests to be
skipped since there is already evidence of non-conformance.</p>
</div>
<div class="sect2">
<h3 id="how_to">How to</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new maven project</p>
</li>
<li>
<p>Include the dependencies of the base test suites</p>
</li>
<li>
<p>Create a testng.xml file including all tests form the base test suites</p>
</li>
<li>
<p>Implement the additional tests for the profile</p>
</li>
<li>
<p>Add the additional tests to the existing testng.xml</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="examples">Examples</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/opengeospatial/ets-dgiwg-wfs20" class="bare">https://github.com/opengeospatial/ets-dgiwg-wfs20</a></p>
</li>
<li>
<p><a href="https://github.com/opengeospatial/ets-dgiwg-wms13" class="bare">https://github.com/opengeospatial/ets-dgiwg-wms13</a></p>
</li>
<li>
<p><a href="https://github.com/opengeospatial/ets-wmts10-nsg" class="bare">https://github.com/opengeospatial/ets-wmts10-nsg</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="developing-profile-ctl">CTL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The OGC Compliance Test Language (<a href="http://portal.opengeospatial.org/files/?artifact_id=33085">CTL</a>)
specifies an XML grammar for defining a test suite. Some older OGC test suites were implemented
using CTL scripts. In recent years test suites have been developed using the TestNG framework,
and this is the recommended approach for new test suites. But some current profiles are based
on older OGC standards for which only CTL-based test suites exist.</p>
</div>
<div class="paragraph">
<p>Tests may be organized into separate packages denoted by the ctl:package element; the main
package must contain a ctl:suite element that identifies the starting test. The ctl:profile
element may be used to formally define a test group that corresponds to a conformance class.
A profile must refer to its base test group (usually the main test suite), and it must also
identify the starting test. The sample listing below displays a profile definition for the
GET method binding in the <a href="https://github.com/opengeospatial/ets-wmts10">WMTS test suite</a>.</p>
</div>
<div class="listingblock">
<div class="title">Profile for the GET method binding in WMTS 1.0</div>
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;profile xmlns="http://www.occamlab.com/ctl" name="wmts:server.profile.kvp.get"&gt;
  &lt;title&gt;WMTS 1.0 Server Compliance Test Profile for KVP GET binding&lt;/title&gt;
  &lt;description&gt;Verifies that a WMTS 1.0 server implementation complies with conformance classes for KVP GET binding.&lt;/description&gt;
  &lt;defaultResult&gt;Pass&lt;/defaultResult&gt;
  &lt;base&gt;wmts:server.suite.base&lt;/base&gt;
  &lt;starting-test&gt;wmts:server.profile.kvp.get.main&lt;/starting-test&gt;
&lt;/profile&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The &lt;base&gt; element refers to the suite or profile (by name) that this profile depends on.
This establishes an implicit ordering, such that the root suite is run first and test
execution follows the dependency graph.</p>
</div>
<div class="paragraph">
<p>It is required to include the required resources of the base test suites in the profile
test suite.</p>
</div>
<div class="sect2">
<h3 id="how_to_2">How To</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new maven project</p>
</li>
<li>
<p>Create a new CTL script as base entry point for the test suite</p>
</li>
<li>
<p>Include the required resources of the base test suites</p>
</li>
<li>
<p>Implement the additional tests for the profile</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="example">Example</h3>
<div class="paragraph">
<p>No example available yet.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="reporting">Reporting</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Test suites of application profiles support the same output formats as a non profile test suites (see <a href="users.html">User Guide</a>).</p>
</div>
<div class="paragraph">
<p>To define the mandatory tests of the profile, conformance classes have to be encoded as described in <a href="encoding-conformance-classes.html">Encoding Conformance Classes</a>. Several report formats (e.g. EARL, HTML) consider this configuration.</p>
</div>
</div>
</div>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &copy;2021
<a href="http://www.opengeospatial.org/">Open Geospatial Consortium</a>.
All rights reserved.</p>
        </div>
        </div>
    </footer>
    </body>
</html>