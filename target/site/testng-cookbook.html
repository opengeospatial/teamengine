<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7.1 at 2016-08-15 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160815" />
    <meta http-equiv="Content-Language" content="en" />
    <title>TEAM Engine &#x2013; Conformance Testing with TestNG, Part 2: Cookbook</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.5.min.js"></script>

                      </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                    <a href="https://github.com/opengeospatial/teamengine" id="bannerLeft">
                                                                                                <img src="./images/te-logo-small.png"  alt="TEAM Engine"/>
                </a>
                      </div>
        <div class="pull-right">                  <a href="http://www.osgeo.org/incubator" id="bannerRight">
                                                                                                <img src="./images/OSGeo_incubation.png"  alt="OSGeo Incubator"/>
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="publishDate">Last Published: 2016-08-15
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 4.8.1
                      </li>
                      
              
      
                                    
    <li class="pull-right">
        <span class="divider">|</span>
                      <a href="https://github.com/opengeospatial/teamengine/issues" class="externalLink" title="Issues">
        Issues</a>
      </li>

  
    <li class="pull-right">
                      <a href="https://github.com/opengeospatial/teamengine/wiki" class="externalLink" title="Wiki">
        Wiki</a>
      </li>

                    </ul>
      </div>

                  
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">Getting Started</li>
                              
      <li>
  
                          <a href="index.html" title="Overview">
          <span class="none"></span>
        Overview</a>
            </li>
                
      <li>
  
                          <a href="installation.html" title="Installation">
          <span class="none"></span>
        Installation</a>
            </li>
                
      <li>
  
                          <a href="users.html" title="User's Guide">
          <span class="none"></span>
        User's Guide</a>
            </li>
                
      <li>
  
                          <a href="virt-guide.html" title="Virtualization Guide">
          <span class="none"></span>
        Virtualization Guide</a>
            </li>
                              <li class="nav-header">Test Suite Development</li>
                              
      <li>
  
                          <a href="testng-essentials.html" title="Using TestNG, Part 1: Essentials">
          <span class="none"></span>
        Using TestNG, Part 1: Essentials</a>
            </li>
                
      <li class="active">
  
            <a href="#"><span class="none"></span>Using TestNG, Part 2: Cookbook</a>
          </li>
                
      <li>
  
                          <a href="ctl.html" title="Using CTL Scripts">
          <span class="none"></span>
        Using CTL Scripts</a>
            </li>
                              <li class="nav-header">About</li>
                              
      <li>
  
                          <a href="relnotes.html" title="Release Notes">
          <span class="none"></span>
        Release Notes</a>
            </li>
            </ul>
              
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                        
        <div id="bodyColumn"  class="span9" >
                                  
            <h1>Conformance Testing with TestNG, Part 2: Cookbook</h1>
<div class="section">
<h2><a name="Recipes"></a>Recipes</h2>

<ol style="list-style-type: decimal">
  
<li><a href="#s1">Introduction</a></li>
  
<li><a href="#s2">Add a dependency on a third-party library</a></li>
  
<li><a href="#s3">Process test run arguments</a></li>
  
<li><a href="#s4">Create a reusable test fixture</a></li>
  
<li><a href="#s5">Declare specification-related constants</a></li>
  
<li><a href="#s6">Create a package for each conformance class</a></li>
  
<li><a href="#s7">Add a test method</a></li>
  
<li><a href="#s8">Provide informative error messages</a></li>
  
<li><a href="#s9">Update TestNG configuration file</a></li>
  
<li><a href="#s10">Verify a test method</a></li>
  
<li><a href="#s11">Publish test suite documentation</a></li>
  
<li><a href="#s12">Run the tests</a></li>
</ol>
<hr /></div>
<div class="section">
<h2><a name="a1_Introduction"></a><a name="s1">1</a> Introduction</h2>
<p>This guide assumes you have read <i>Conformance Testing with TestNG, Part 1: Essentials</i> and have generated a new test suite using the Maven archetype as described in that document. This document presents some recipes for modifying a pristine test suite in order to implement specific test requirements. The OGC <a class="externalLink" href="http://www.geopackage.org/">GeoPackage</a> specification will be used to provide concrete examples.</p></div>
<div class="section">
<h2><a name="a2_Add_a_dependency_on_a_third-party_library"></a><a name="s2">2</a> Add a dependency on a third-party library</h2>
<p>It is common to make use of external libraries in order to implement new test methods. In this case we need a JDBC driver to access a SQLite database. This is accomplished by simply adding the following dependency to the project POM file:</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;dependency&gt;
  &lt;groupId&gt;org.xerial&lt;/groupId&gt;
  &lt;artifactId&gt;sqlite-jdbc&lt;/artifactId&gt;
  &lt;version&gt;3.8.11.2&lt;/version&gt;
&lt;/dependency&gt;
</pre></div></div>
<p>The driver will be available in the classpath as a compile dependency (the default scope).</p></div>
<div class="section">
<h2><a name="a3_Process_test_run_arguments"></a><a name="s3">3</a> Process test run arguments</h2>
<p>The conformance test suite will accept one or more arguments that identify the test subject, or implementation under test (IUT). The value of the <i>iut</i> argument is expected to be an absolute URI that refers to the IUT; in our example this should be a GeoPackage file. The built-in listener <tt>PrimarySuiteListener</tt> (provided by the teamengine-spi module) adds the supplied test run arguments to the collection of suite-level parameters. The input arguments can then be validated and processed by the <tt>SuiteFixtureListener</tt> in the root package. In the <tt>processSuiteParameters</tt> method the <i>iut</i> argument value is dereferenced and the resulting entity is saved to a local file. The File object is set as the value of the suite attribute named &#x201c;testSubjectFile&#x201d;; it can then be accessed as needed.</p>

<div class="source">
<div class="source"><pre class="prettyprint">void processSuiteParameters(ISuite suite) {
    Map&lt;String, String&gt; params = suite.getXmlSuite().getParameters();
    TestSuiteLogger.log(Level.CONFIG, &quot;Suite parameters\n&quot; 
        + params.toString());
    String iutParam = params.get(TestRunArg.IUT.toString());
    if ((null == iutParam) || iutParam.isEmpty()) {
        throw new IllegalArgumentException(
            &quot;Required test run parameter not found: &quot; 
            + TestRunArg.IUT.toString());
    }
    URI iutRef = URI.create(iutParam.trim());
    File gpkgFile = null;
    try {
        gpkgFile = URIUtils.dereferenceURI(iutRef);
    } catch (IOException iox) {
        throw new RuntimeException(
            &quot;Failed to dereference resource located at &quot; + iutRef, iox);
    }
    TestSuiteLogger.log(Level.FINE, 
        String.format(&quot;Wrote test subject to file: %s (%d bytes)&quot;,
        gpkgFile.getAbsolutePath(), gpkgFile.length()));
    suite.setAttribute(SuiteAttribute.TEST_SUBJ_FILE.getName(), gpkgFile);
}
</pre></div></div></div>
<div class="section">
<h2><a name="a4_Create_a_reusable_test_fixture"></a><a name="s4">4</a> Create a reusable test fixture</h2>
<p>A test fixture (also known as a test context) establishes a consistent baseline for running tests. It includes all the things that must be in place in order to run a test and verify a particular outcome. In practice, a fixture includes a set of of reusable components that persist for the duration of multiple tests&#x2013;or even the lifetime of the entire test run. Examples of fixture items include: </p>

<ul>
  
<li>a description of the test subject (e.g. service metadata);</li>
  
<li>Pre-compiled schemas used to validate response messages;</li>
  
<li>an HTTP client component used to interact with a web service;</li>
  
<li>sample data that must be loaded in advance of testing;</li>
  
<li>a driver used to create a database connection.</li>
</ul>
<p>It is often convenient to create a shared fixture that provides easy access to commonly used objects for the duration of a test run. The <tt>CommonFixture</tt> class in the root package may be used for this purpose. In this test suite a shared fixture contains the following elements:</p>

<ul>
  
<li>a SQLite database file containing a GeoPackage;</li>
  
<li>a JDBC DataSource for accessing the SQLite database.</li>
</ul>

<div class="source">
<div class="source"><pre class="prettyprint">/** A SQLite database file containing a GeoPackage. */
protected File gpkgFile;
/** A JDBC DataSource for accessing the SQLite database. */
protected DataSource dataSource;

/**
 * Initializes the common test fixture. The fixture includes the following
 * components:
 * &lt;ul&gt;
 * &lt;li&gt;a File representing a GeoPackage;&lt;/li&gt;
 * &lt;li&gt;a DataSource for accessing a SQLite database.&lt;/li&gt;
 * &lt;/ul&gt;
 * 
 * @param testContext
 *            The test context that contains all the information for a test
 *            run, including suite attributes.
 */
@BeforeClass
public void initCommonFixture(ITestContext testContext) {
    Object testFile = testContext.getSuite().getAttribute(SuiteAttribute.TEST_SUBJ_FILE.getName());
    if (null == testFile || !File.class.isInstance(testFile)) {
        throw new IllegalArgumentException(
                String.format(&quot;Suite attribute value is not a File: %s&quot;, SuiteAttribute.TEST_SUBJ_FILE.getName()));
    }
    this.gpkgFile = File.class.cast(testFile);
    SQLiteConfig dbConfig = new SQLiteConfig();
    dbConfig.setSynchronous(SynchronousMode.OFF);
    dbConfig.setJournalMode(JournalMode.MEMORY);
    dbConfig.enforceForeignKeys(true);
    SQLiteDataSource sqliteSource = new SQLiteDataSource(dbConfig);
    sqliteSource.setUrl(&quot;jdbc:sqlite:&quot; + this.gpkgFile.getPath());
    this.dataSource = sqliteSource;
}
</pre></div></div>
<p>Note that the File object is obtained from a suite attribute in the <tt>ITestContext</tt> object that is injected into the <b>initCommonFixture</b> method. Any @Before or @Test method can declare a parameter of type <tt>ITestContext</tt>; when this is done, TestNG will perform the dependency injection automatically. The DataSource belongs to the test class (as a protected field, so it&#x2019;s accessible to all subclasses).</p></div>
<div class="section">
<h2><a name="a5_Declare_specification-related_constants"></a><a name="s5">5</a> Declare specification-related constants</h2>
<p>Most specifications define constant values that show up in test assertions and error messages. Add a class to the root package that declares these constants. The <tt>GPKG10</tt> class contains various constants pertaining to GeoPackage content and SQLite database files.</p>

<div class="source">
<div class="source"><pre class="prettyprint">/**
 * Provides various constants pertaining to GeoPackage 1.0 data containers.
 */
public class GPKG10 {

    /** Length of SQLite database file header (bytes). */
    public static final int DB_HEADER_LENGTH = 100;
    /** Starting offset of &quot;Application ID&quot; field in file header (4 bytes). */
    public static final int APP_ID_OFFSET = 68;
    /** SQLite v3 header string (terminated with a NULL character). */
    public static final byte[] SQLITE_MAGIC_HEADER = 
        new String(&quot;SQLite format 3\0&quot;).getBytes(StandardCharsets.US_ASCII);
    /** Application id for OGC GeoPackage 1.0. */
    public static final byte[] APP_GP10 = 
        new String(&quot;GP10&quot;).getBytes(StandardCharsets.US_ASCII);
    /** GeoPackage file name extension. */
    public static final String GPKG_FILENAME_SUFFIX = &quot;.gpkg&quot;;
}
</pre></div></div></div>
<div class="section">
<h2><a name="a6_Create_a_package_for_each_conformance_class"></a><a name="s6">6</a> Create a package for each conformance class</h2>
<p>Almost every OGC specification and ISO geomatics standard (in the 19100 series overseen by <a class="externalLink" href="http://www.isotc211.org/">TC 211</a>) defines an abstract test suite (ATS) containing one or more conformance classes. A conformance class is a set of logically related test cases that cover some functional capability. For example, the GeoPackage <b>Core</b> conformance class includes constraints that apply to all packages; the <b>Tiles</b> conformance class only applies to packages that contain tile data.</p>
<p>Conformance test suites implemented using TestNG adhere to the convention of putting tests that belong to different conformance classes into separate packages. So we&#x2019;ll create a new package for the <b>Core</b> conformance class. Don&#x2019;t neglect to include a package comment file (<tt>package-info.java</tt>) that describes the conformance class and identifies the relevant sources of test requirements.</p>

<div class="source">
<div class="source"><pre class="prettyprint">/**
 * This package contains tests covering the &lt;strong&gt;Core&lt;/strong&gt; 
 * conformance class. The constraints apply to all GeoPackage files 
 * and fall into three areas:
 * 
 * &lt;ul&gt;
 * &lt;li&gt;SQLite Container&lt;/li&gt;
 * &lt;li&gt;Spatial Reference Systems&lt;/li&gt;
 * &lt;li&gt;Contents&lt;/li&gt;
 * &lt;/ul&gt;
 * 
 * &lt;p style=&quot;margin-bottom: 0.5em&quot;&gt;
 * &lt;strong&gt;Sources&lt;/strong&gt;
 * &lt;/p&gt;
 * &lt;ul&gt;
 * &lt;li&gt;&lt;a href=&quot;http://www.geopackage.org/spec/#_core&quot; target=&quot;_blank&quot;&gt;
 * GeoPackage Encoding Standard - Core&lt;/a&gt;&lt;/li&gt;
 * &lt;/ul&gt;
 */
package org.opengis.cite.gpkg10.core;
</pre></div></div></div>
<div class="section">
<h2><a name="a7_Add_a_test_method"></a><a name="s7">7</a> Add a test method</h2>
<p>In general a test method is traced to an abstract test case (ATC) or a requirement in a relevant specification. Test classes are declared as appropriate, but often it makes sense to preserve a logical grouping (this also helps to reduce the size of test classes). For example, the GeoPackage specification splits the core conformance constraints into three groups: the container structure, spatial reference systems, and package contents. Declare a test class for checking the general characteristics of a GeoPackage as a whole. Note that it extends <tt>CommonFixture</tt> so as to use the shared test fixture.</p>

<div class="source">
<div class="source"><pre class="prettyprint">package org.opengis.cite.gpkg10.core;

import java.io.FileInputStream;
import java.io.IOException;
import java.nio.charset.StandardCharsets;
import java.util.Arrays;

import org.opengis.cite.gpkg10.CommonFixture;
import org.opengis.cite.gpkg10.ErrorMessage;
import org.opengis.cite.gpkg10.ErrorMessageKeys;
import org.opengis.cite.gpkg10.GPKG10;
import org.testng.Assert;
import org.testng.annotations.Test;

/**
 * Defines test methods that apply to an SQLite database file. The 
 * GeoPackage standard defines a SQL database schema designed for use 
 * with the SQLite software library.
 * 
 * &lt;p style=&quot;margin-bottom: 0.5em&quot;&gt;
 * &lt;strong&gt;Sources&lt;/strong&gt;
 * &lt;/p&gt;
 * &lt;ul&gt;
 * &lt;li&gt;&lt;a href=&quot;http://www.geopackage.org/spec/#_sqlite_container&quot; 
 * target=&quot;_blank&quot;&gt;GeoPackage Encoding Standard - SQLite Container&lt;/a&gt; 
 * (OGC 12-128r12)
 * &lt;/li&gt;
 * &lt;li&gt;&lt;a href=&quot;http://www.sqlite.org/fileformat2.html&quot; 
 * target= &quot;_blank&quot;&gt;SQLite Database File Format&lt;/a&gt;&lt;/li&gt;
 * &lt;/ul&gt;
 */
public class SQLiteContainerTests extends CommonFixture {
}
</pre></div></div>
<p>Now add a test method to verify requirement 1: &#x201c;A GeoPackage SHALL be a SQLite database file using version 3 of the SQLite file format.&#x201d; Do use Javadoc comments to describe the applicable constraints and expected outcome. </p>

<div class="source">
<div class="source"><pre class="prettyprint">/**
 * A GeoPackage shall be a SQLite database file using version 3 
 * of the SQLite file format. The first 16 bytes of a GeoPackage 
 * must contain the (UTF-8/ASCII) string &quot;SQLite format 3&quot;, including 
 * the terminating NULL character.
 * 
 * @throws IOException
 *             If an I/O error occurs while trying to read the data file.
 * 
 * @see &lt;a href=&quot;http://www.geopackage.org/spec/#_requirement-1&quot; 
 * target=&quot;_blank&quot;&gt;File Format - Requirement 1&lt;/a&gt;
 */
@Test(description = &quot;See OGC 12-128r12: Requirement 1&quot;)
public void fileHeaderString() throws IOException {
    final byte[] headerString = 
        new byte[GPKG10.SQLITE_MAGIC_HEADER.length];
    try (FileInputStream fileInputStream = 
        new FileInputStream(this.gpkgFile)) {
            fileInputStream.read(headerString);
    }
    Assert.assertEquals(headerString, GPKG10.SQLITE_MAGIC_HEADER, 
        ErrorMessage.format(ErrorMessageKeys.INVALID_HEADER_STR, 
        new String(headerString, StandardCharsets.US_ASCII)));
}
</pre></div></div></div>
<div class="section">
<h2><a name="a8_Provide_informative_error_messages"></a><a name="s8">8</a> Provide informative error messages</h2>
<p>It is very important to provide informative error messages so testers are not baffled by the reason for a failing test assertion. It is even possible to localize error messages using resource bundles, a long-standing mechanism in Java for isolating <a class="externalLink" href="https://docs.oracle.com/javase/tutorial/i18n/resbundle/">locale-specific data</a>. Test developers may add error messages in multiple languages if desired.</p>
<p>The <tt>ErrorMessageKeys</tt> class in the root package defines keys used to access localized messages for assertion errors; the messages themselves are stored in Properties files on the classpath in the root package (the MessageBundle*.properties files, one per supported language). There are several keys already defined for common error messages, but it is a simple matter to add more specific ones. For example, to add an error key for indicating the presence of an invalid header string in a GeoPackage file:</p>

<div class="source">
<div class="source"><pre class="prettyprint">public static final String INVALID_HEADER_STR = &quot;InvalidHeaderString&quot;;
</pre></div></div>
<p>Supplement this with matching entries in the existing resource bundles:</p>

<div class="source">
<div class="source"><pre class="prettyprint"># MessageBundle.properties (default), MessageBundle_en.properties
InvalidHeaderString = Data file has unexpected header string: {0}
</pre></div></div>
<p>Note the use of a message parameter, which is invaluable in providing diagnostic information. As shown in recipe 7 the <tt>ErrorMessage</tt> class provides a method for creating an assertion error message:</p>

<div class="source">
<div class="source"><pre class="prettyprint">ErrorMessage.format(ErrorMessageKeys.INVALID_HEADER_STR, 
    new String(headerString, StandardCharsets.US_ASCII))
</pre></div></div></div>
<div class="section">
<h2><a name="a9_Update_TestNG_configuration_file"></a><a name="s9">9</a> Update TestNG configuration file</h2>
<p>The execution of a test suite is driven by the TestNG configuration file, a classpath resource located in the root package (the <tt>testng.xml</tt> file found under src/main/resources in the code base). Each &lt;test&gt; element in the file corresponds to a conformance class. The &lt;packages&gt; element lists the packages that contain the test methods. Test methods that are not included by any reference will not be run. Add an element for the <b>Core</b> conformance class:</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;test name=&quot;Core&quot;&gt;
  &lt;packages&gt;
    &lt;package name=&quot;org.opengis.cite.gpkg10.core&quot; /&gt;
  &lt;/packages&gt;
&lt;/test&gt;
</pre></div></div></div>
<div class="section">
<h2><a name="a10_Verify_a_test_method"></a><a name="s10">10</a> Verify a test method</h2>
<p>Like any other code, we should be confident that the test code behaves as expected such that a failing test verdict is due to a faulty IUT and not a buggy test. So we define (positive and negative) unit tests in order to verify test methods. The <a class="externalLink" href="http://junit.org/">JUnit</a> and <a class="externalLink" href="http://mockito.org/">Mockito</a> frameworks are available for this purpose.</p>
<p>The <tt>VerifySQLiteContainerTests</tt> class verifies test methods defined by <tt>SQLiteContainerTests</tt>. Adopting this naming convention is recommended: the test methods in <i>ConformanceClassATests</i> are exercised by <i>VerifyConformanceClassATests</i> (under src/test/java).</p>

<div class="source">
<div class="source"><pre class="prettyprint">package org.opengis.cite.gpkg10.core;

import static org.mockito.Mockito.mock;
import static org.mockito.Mockito.when;

import java.io.File;
import java.io.IOException;
import java.net.URISyntaxException;
import java.net.URL;
import java.sql.SQLException;

import org.junit.BeforeClass;
import org.junit.Rule;
import org.junit.Test;
import org.junit.rules.ExpectedException;
import org.opengis.cite.gpkg10.SuiteAttribute;
import org.testng.ISuite;
import org.testng.ITestContext;

public class VerifySQLiteContainerTests {

    private static ITestContext testContext;
    private static ISuite suite;
    @Rule
    public ExpectedException thrown = ExpectedException.none();

    @BeforeClass
    public static void initTestFixture() {
        testContext = mock(ITestContext.class);
        suite = mock(ISuite.class);
        when(testContext.getSuite()).thenReturn(suite);
    }

    @Test
    public void validHeaderString() 
        throws IOException, SQLException, URISyntaxException {
        URL gpkgUrl = getClass().getResource(
            &quot;/gpkg/simple_sewer_features.gpkg&quot;);
        File dataFile = new File(gpkgUrl.toURI());
        when(suite.getAttribute(
            SuiteAttribute.TEST_SUBJ_FILE.getName())).thenReturn(dataFile);
        SQLiteContainerTests iut = new SQLiteContainerTests();
        iut.initCommonFixture(testContext);
        iut.fileHeaderString();
    }
}
</pre></div></div>
<p>Elements of the test fixture can be mocked or stubbed as appropriate. See the <a class="externalLink" href="http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html">Mockito documentation</a> for more information.</p></div>
<div class="section">
<h2><a name="a11_Publish_test_suite_documentation"></a><a name="s11">11</a> Publish test suite documentation</h2>
<p>Test suite documentation can be published as a <a class="externalLink" href="https://pages.github.com/">GitHub Pages</a> site that is freely hosted in the <tt>github.io</tt> domain. A Maven project site is generated when the test suite is built. Simply push the site content to the special <i>gh-pages</i> branch in order to make it publicly available.</p>

<div class="source">
<div class="source"><pre class="prettyprint">git checkout --orphan gh-pages
git rm -rf .
jar xf $HOME/ets-gpkg10-0.1-SNAPSHOT-site.jar
git commit -a -m &quot;Update site content for release 0.1-SNAPSHOT&quot;
git push origin gh-pages
</pre></div></div>
<p>The site may be accessed at <a class="externalLink" href="http://opengeospatial.github.io/ets-gpkg10/">http://opengeospatial.github.io/ets-gpkg10/</a>.</p></div>
<div class="section">
<h2><a name="a12_Run_the_tests"></a><a name="s12">12</a> Run the tests</h2>
<div class="section">
<h3><a name="a12-1._Integrated_development_environment_IDE"></a>12-1. Integrated development environment (IDE)</h3>
<p>You can use a Java IDE such as Eclipse, NetBeans, or IntelliJ to build and run the test suite. First, clone the repository and build the project. All of these IDEs have built-in support for <a class="externalLink" href="https://maven.apache.org/">Apache Maven</a>.</p>
<p><b>Set the main class to run</b>: <tt>org.opengis.cite.gpkg10.TestNGController</tt></p>
<p><b>Arguments</b>: The first argument must refer to an XML properties file containing the required test run arguments. If not specified, the default location at <tt>${user.home}/test-run-props.xml</tt> will be used. You can modify the sample file in <tt>src/main/config/test-run-props.xml</tt></p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!DOCTYPE properties SYSTEM &quot;http://java.sun.com/dtd/properties.dtd&quot;&gt;
&lt;properties version=&quot;1.0&quot;&gt;
  &lt;comment&gt;Test run arguments&lt;/comment&gt;
  &lt;entry key=&quot;iut&quot;&gt;http://www.geopackage.org/data/simple_sewer_features.gpkg&lt;/entry&gt;
&lt;/properties&gt;
</pre></div></div>
<p>The TestNG results file (<tt>testng-results.xml</tt>) will be written to a subdirectory in <tt>${user.home}/testng/</tt> having a UUID value as its name.</p></div>
<div class="section">
<h3><a name="a12-2._Command_shell_console"></a>12-2. Command shell (console)</h3>
<p>One of the build artifacts is an &#x201c;all-in-one&#x201d; JAR file that includes the test suite and all of its dependencies; this makes it very easy to execute the test suite in a command shell:</p>

<div class="source">
<div class="source"><pre class="prettyprint">java -jar ets-gpkg10-0.1-SNAPSHOT-aio.jar [-o|--outputDir $TMPDIR] [test-run-props.xml]
</pre></div></div></div>
<div class="section">
<h3><a name="a12-3._OGC_test_harness"></a>12-3. OGC test harness</h3>
<p>You may also use <a class="externalLink" href="https://github.com/opengeospatial/teamengine">TEAM Engine</a>, the official OGC test harness, to execute the test suite. The latest test suite releases are usually available at the <a class="externalLink" href="http://cite.opengeospatial.org/te2/">beta testing facility</a>. As an alternative, you can <a class="externalLink" href="https://github.com/opengeospatial/teamengine">build and deploy</a> the test harness yourself and use a local installation. The test suite can be invoked through the graphical interface or by using the RESTful API as indicated below.</p>

<div class="source">
<div class="source"><pre class="prettyprint">/teamengine/rest/suites/gpkg10/0.1-SNAPSHOT/run?iut=http://www.geopackage.org/data/simple_sewer_features.gpkg
</pre></div></div></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                    2016
                        <a href="http://www.opengeospatial.org/">Open Geospatial Consortium</a>.
            All rights reserved.    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
