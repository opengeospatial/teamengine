<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2015-07-31 
 | Rendered using Apache Maven Fluido Skin 1.3.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20150731" />
    <meta http-equiv="Content-Language" content="en" />
    <title>TEAM Engine &#x2013; Tester Guide</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.1.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.1.min.js"></script>

    
                  </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                    <a href="https://github.com/opengeospatial/teamengine" id="bannerLeft">
                                                                                                <img src="./images/te-logo-small.png"  alt="TEAM Engine"/>
                </a>
                      </div>
        <div class="pull-right">                  <a href="http://www.osgeo.org/incubator" id="bannerRight">
                                                                                                <img src="./images/OSGeo_incubation.png"  alt="OSGeo Incubator"/>
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2015-07-31
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 4.2
                      </li>
                      
                
                    
      
                                    
    <li class="pull-right">
        <span class="divider">|</span>
                      <a href="https://github.com/opengeospatial/teamengine/issues" class="externalLink" title="Issues">
        Issues</a>
      </li>

  
    <li class="pull-right">
                      <a href="https://github.com/opengeospatial/teamengine/wiki" class="externalLink" title="Wiki">
        Wiki</a>
      </li>

                    </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Getting Started</li>
                              
      <li>
  
                          <a href="index.html" title="Overview">
          <i class="none"></i>
        Overview</a>
            </li>
                
      <li>
  
                          <a href="installation.html" title="Installation">
          <i class="none"></i>
        Installation</a>
            </li>
                
      <li>
  
                          <a href="users.html" title="User's Guide">
          <i class="none"></i>
        User's Guide</a>
            </li>
                
      <li class="active">
  
            <a href="#"><i class="none"></i>Tester's Guide</a>
          </li>
                
      <li>
  
                          <a href="architecture.html" title="Architecture">
          <i class="none"></i>
        Architecture</a>
            </li>
                              <li class="nav-header">About</li>
                              
      <li>
  
                          <a href="relnotes.html" title="Release Notes">
          <i class="none"></i>
        Release Notes</a>
            </li>
            </ul>
                
                    
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <h1>Tester Guide</h1>
<p>This document provides some basic guidance about how to develop a test suite that can be executed using TEAM Engine. The test harness is capable of running tests implemented using the OGC CTL (Compliance Test Language) scripting language and the TestNG framework.</p>
<div class="section">
<h2><a name="CTL_scripts"></a>CTL scripts</h2>
<p>The OGC CTL grammar can be regarded as a kind of XML-based domain-specific language for defining test suites. A test suite is processed to produce XSLT 2.0 templates that are then executed by the Saxon processor. See the OGC specification <a class="externalLink" href="http://portal.opengeospatial.org/files/?artifact_id=33085">OGC 06-126r2</a> for details about developing test suites using CTL elements.</p>
<p>The teamengine-core-\${project.version}-base.zip archive contains a sample test suite defined in <tt>scripts/note.ctl</tt>. The OGC compliance testing program also maintains a set of test suites that are publicly available from GitHub at this location: <a class="externalLink" href="https://github.com/opengeospatial">https://github.com/opengeospatial</a>.</p></div>
<div class="section">
<h2><a name="TestNG_framework"></a>TestNG framework</h2>
<div class="section">
<h3><a name="Creating_a_new_test_suite"></a>Creating a new test suite</h3>
<p>The TEAM Engine test harness concentrates on functional or &#x201c;black box&#x201d; testing that aims to verify the behavior or structure of a test subject against the relevant specifications. It can execute test suites implemented using <a class="externalLink" href="http://testng.org">TestNG</a>, a popular Java-based testing framework that is used to perform testing at multiple levels, from unit to system testing.</p>
<p>A Maven <a class="externalLink" href="http://maven.apache.org/archetype/maven-archetype-plugin/">archetype</a> is available that provides a template for seeding a new test suite; it quickly generates a rudimentary implementation of an executable test suite (ETS) that can be run immediately. The <a class="externalLink" href="https://github.com/opengeospatial/ets-archetype-testng">source code</a> is hosted at GitHub. Project releases are available in the central Maven repository with these coordinates (using the latest version is always recommended):</p>

<div class="source">
<div class="source">
<pre>    groupId: org.opengis.cite
    artifactId: ets-archetype-testng
    version: 2.2
</pre></div></div>
<p>To create a new test suite, invoke the interactive &#x2018;generate&#x2019; goal of the archetype plugin and supply the <tt>ets-code</tt> parameter to specify the identifier for the test suite; this value must be a legal Java package name (for example, &#x2018;alpha10&#x2019; as shown below).</p>

<div class="source">
<div class="source">
<pre>    mvn archetype:generate -Dets-code=alpha10 -DarchetypeGroupId=org.opengis.cite
</pre></div></div>
<p>Several prompts will collect various property values in order to generate the test suite project. The suggested default values may be modified if desired. The new project is created in a subdirectory named using the value of the artifactId property.</p>
<p>The main class, <tt>TestNGController</tt>, resides in the root package; it implements the <tt>TestSuiteController</tt> interface declared in the teamengine-spi module (see Figure 2). The test suite configuration file (testng.xml, also located in the root package under src/main/resources) imposes a high-level structure on a test suite by organizing the test classes into test sets, each of which corresponds to a conformance class. For more information see the following section, <i>Basic anatomy of a test suite</i>.</p></div>
<div class="section">
<h3><a name="Basic_anatomy_of_a_test_suite"></a>Basic anatomy of a test suite</h3>
<p>The TestNG framework offers considerable flexibility regarding the overall organization of a test suite. A test run executes one or more test suites, each of which may include a collection of child test suites. A child test suite encapsulates tests for a specific functional area. For example, a so-called &#x201c;class 2&#x201d; profile (see ISO 19106) that introduces new capabilities still requires conformance to the base standard(s); there may be a child test suite defined for each applicable base standard. The essential structure of a test suite is illustrated in the following figure.</p>
<p><b>Structure of a TestNG test suite</b></p>
<p><img src="./images/testng-suite.png" alt="Structure of a TestNG test suite" /></p>
<p>Each &lt;test&gt; element occurring within a top-level &lt;suite&gt; element denotes a set of tests that typically corresponds to a conformance class or level. The set contains one or more test classes that focus on particular capabilities or feature sets (e.g., WFS GetFeature). A test class contains test methods that implement the actual test cases; these methods are annotated with <tt>@Test</tt>. The listing shown below includes the test suite definition produced when creating a new test suite from the ETS archetype (see src/main/resources/org/opengis/cite/\${ets-code}/testng.xml).</p>

<div class="source">
<div class="source">
<pre>&lt;suite name=&quot;alpha-1.0-SNAPSHOT&quot; verbose=&quot;0&quot; configfailurepolicy=&quot;skip&quot;&gt;
  &lt;parameter name=&quot;iut&quot;  value=&quot;&quot;/&gt;
  &lt;parameter name=&quot;ics&quot;  value=&quot;&quot;/&gt;

  &lt;listeners&gt;
    &lt;listener class-name=&quot;org.opengis.cite.alpha.TestRunListener&quot; /&gt;
    &lt;listener class-name=&quot;org.opengis.cite.alpha.SuiteFixtureListener&quot; /&gt;
  &lt;/listeners&gt;

  &lt;test name=&quot;Conformance Level 1&quot;&gt;
    &lt;classes&gt;
      &lt;class name=&quot;org.opengis.cite.alpha.level1.Capability1Tests&quot; /&gt;
    &lt;/classes&gt;
  &lt;/test&gt;
  &lt;test name=&quot;Conformance Level 2&quot;&gt;
    &lt;classes&gt;
      &lt;class name=&quot;org.opengis.cite.alpha.level2.Capability2Tests&quot; /&gt;
    &lt;/classes&gt;
  &lt;/test&gt;
&lt;/suite&gt;
</pre></div></div>
<p>The order of test execution can be controlled to some extent, although this should rarely be necessary. The structure of the XML suite definition is the most important determinant. Keep the following default behaviors in mind when putting it together:</p>

<ul>
  
<li>Test groups (&lt;test&gt; elements) comprising a suite are executed in document order (as specified in the XML suite definition).</li>
  
<li>Within a given test group, constituent test classes are executed in document order.</li>
  
<li>A child test suite is run before its parent suite.</li>
  
<li>Test methods are run after their dependencies, which are declared using the <tt>dependsOnMethods</tt> or <tt>dependsOnGroups</tt> attributes on the @Test annotation.</li>
</ul>
<p>See the <a class="externalLink" href="http://testng.org/doc/documentation-main.html">TestNG documentation</a> for more information. The books listed below may also be of interest:</p>

<ul>
  
<li><a class="externalLink" href="http://books.google.ca/books?id=9CuP8S2glWQC">TestNG Beginner&#x2019;s Guide</a></li>
  
<li><a class="externalLink" href="http://books.google.ca/books?id=bCvcMcLZwV4C">Next Generation Java Testing: TestNG and Advanced Concepts</a></li>
</ul></div>
<div class="section">
<h3><a name="Test_suite_development"></a>Test suite development</h3>
<p>Most IDEs have integrated support for working with Maven projects (e.g. Eclipse, NetBeans, IntelliJ), so test developers may use their IDE of choice. Some tips for using Eclipse are provided below.</p>
<p>The following Eclipse plug-ins are strongly recommended; install them from the indicated update sites.</p>

<ul>
  
<li>TestNG: Update from [http://beust.com/eclipse]</li>
  
<li>Subclipse (Subversion 1.7 client): Update from [http://subclipse.tigris.org/update_1.8.x]</li>
  
<li>m2e (Maven integration): From the main update site for the Eclipse release, select &#x201c;General Purpose Tools&#x201d; &gt; m2e</li>
  
<li>EGit (Git SCM client): Available from the main update site.</li>
</ul>
<p><b>Note:</b> Some Eclipse distributions (such as Eclipse 4.4 for Java EE Developers) may already include some of these plug-ins by default.</p>
<p>The main class is <tt>TestNGController</tt>, located in the root package. The test run arguments are supplied as an XML representation of a Java properties file. Specify the location of this file as the argument in a Java run configuration or put it in your user home directory (\$HOME or %USERPROFILE%) and name it &#x201c;test-run-props.xml&#x201d;. An example is shown in the listing below (see also src/main/config/test-run-props.xml).</p>

<div class="source">
<div class="source">
<pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!DOCTYPE properties SYSTEM &quot;http://java.sun.com/dtd/properties.dtd&quot;&gt;
&lt;properties version=&quot;1.0&quot;&gt;
  &lt;comment&gt;Sample test run arguments&lt;/comment&gt;
  &lt;entry key=&quot;iut&quot;&gt;http://www.w3schools.com/xml/note.xml&lt;/entry&gt;
  &lt;entry key=&quot;ics&quot;&gt;level-2&lt;/entry&gt;
&lt;/properties&gt;
</pre></div></div>
<p><img src="./images/info-16px.png" alt="info" /> <b>Note:</b> The value of the &#x2018;iut&#x2019; argument in the listing above must be an absolute URI that conforms to the <tt>http</tt> or <tt>file</tt> schemes.</p>
<p>The test results will be written to a subdirectory (named by a UUID value) created in the user home directory specified by the system property &#x201c;user.home&#x201d;. By default this is the XML report generated by TestNG. In order to activate the full set of default TestNG listeners (which will also produce an HTML report), modify the last line of the <tt>TestNGController(String)</tt> constructor and change the third argument to &#x2018;true&#x2019;.</p>
<p>As an alternative to invoking the main test controller, it is also possible to create a TestNG run configuration if the <a class="externalLink" href="http://testng.org/doc/eclipse.html">TestNG Eclipse plugin</a> has been installed. Select Run &gt; Run Configurations&#x2026; and choose <b>TestNG</b>. Create a new launch configuration from a test suite definition file by clicking the &#x201c;Suite&#x201d; option and browsing to the <tt>testng.xml</tt> file located within the src/main/resources directory. Specify a value for all required test suite parameters. Note that any values appearing here are superseded by those given in the properties file when the suite is run using the TestNGController class. When the configuration is run the results are displayed in the TestNG view.</p>
<p>Each test suite should contain unit tests to verify that all test methods (and supporting utility methods) behave as expected. The <a class="externalLink" href="http://junit.org/">JUnit</a> and <a class="externalLink" href="http://code.google.com/p/mockito/">Mockito</a> frameworks are commonly used for this purpose. A new test suite generated from the Maven archetype includes several sample unit tests.</p>
<p>A test run requires one or more arguments that supply information about the test subject and how thoroughly it will be tested. The arguments are typically processed by a <tt>SuiteFixtureListener</tt> at the beginning of the test run; this listener implements the TestNG interface <a class="externalLink" href="http://testng.org/javadocs/org/testng/ISuiteListener.html">ISuiteListener</a>. The result of processing an argument will generally be set as a suite-level attribute that can then be accessed by test methods during the test run. For example, a web service description is parsed and the resulting XML document is then set as an attribute of the ISuite instance:</p>

<div class="source">
<div class="source">
<pre>ISuite suite; // passed in via ISuiteListener#onStart(ISuite suite) 
Document iutDoc = URIUtils.parseURI(iutRef);
suite.setAttribute(SuiteAttribute.TEST_SUBJECT.getName(), iutDoc);
</pre></div></div></div>
<div class="section">
<h3><a name="Utility_libraries"></a>Utility libraries</h3>
<p>A test suite may require some additional libraries in order to perform more specialized assertion checking. Currently there are a couple of utility libraries available that facilitate schema validation and geospatial data processing; these are available at GitHub, and releases are published in the <a class="externalLink" href="http://search.maven.org/#search|ga|1|g%3A%22org.opengis.cite%22">Maven Central repository</a></p>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th>groupId </th>
      
<th>artifactId </th>
      
<th>description</th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td>org.opengis.cite </td>
      
<td><a class="externalLink" href="https://github.com/opengeospatial/schema-utils">schema-utils</a> </td>
      
<td>Provides support for validating XML representations using the following schema languages: W3C XML Schema 1.0, Schematron (ISO/IEC 19757-3:2006), and RELAX NG (ISO/IEC 19757-2:2008).</td>
    </tr>
    
<tr class="a">
      
<td>org.opengis.cite </td>
      
<td><a class="externalLink" href="https://github.com/opengeospatial/geomatics-geotk">geomatics-geotk</a> </td>
      
<td>Provides support for processing spatial data and associated metadata using various Geotk modules (see <a class="externalLink" href="http://www.geotoolkit.org/)">http://www.geotoolkit.org/)</a>.</td>
    </tr>
  </tbody>
</table></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                              <p >Copyright &copy;                    2015
                        <a href="http://www.opengeospatial.org/">Open Geospatial Consortium</a>.
            All rights reserved.      
                    
      </p>
        </div>

        
        
                </div>
    </footer>
        </body>
</html>
