<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7.1 at 2016-08-15 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160815" />
    <meta http-equiv="Content-Language" content="en" />
    <title>TEAM Engine &#x2013; Installation</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.5.min.js"></script>

                      </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                    <a href="https://github.com/opengeospatial/teamengine" id="bannerLeft">
                                                                                                <img src="./images/te-logo-small.png"  alt="TEAM Engine"/>
                </a>
                      </div>
        <div class="pull-right">                  <a href="http://www.osgeo.org/incubator" id="bannerRight">
                                                                                                <img src="./images/OSGeo_incubation.png"  alt="OSGeo Incubator"/>
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="publishDate">Last Published: 2016-08-15
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 4.8.1
                      </li>
                      
              
      
                                    
    <li class="pull-right">
        <span class="divider">|</span>
                      <a href="https://github.com/opengeospatial/teamengine/issues" class="externalLink" title="Issues">
        Issues</a>
      </li>

  
    <li class="pull-right">
                      <a href="https://github.com/opengeospatial/teamengine/wiki" class="externalLink" title="Wiki">
        Wiki</a>
      </li>

                    </ul>
      </div>

                  
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">Getting Started</li>
                              
      <li>
  
                          <a href="index.html" title="Overview">
          <span class="none"></span>
        Overview</a>
            </li>
                
      <li class="active">
  
            <a href="#"><span class="none"></span>Installation</a>
          </li>
                
      <li>
  
                          <a href="users.html" title="User's Guide">
          <span class="none"></span>
        User's Guide</a>
            </li>
                
      <li>
  
                          <a href="virt-guide.html" title="Virtualization Guide">
          <span class="none"></span>
        Virtualization Guide</a>
            </li>
                              <li class="nav-header">Test Suite Development</li>
                              
      <li>
  
                          <a href="testng-essentials.html" title="Using TestNG, Part 1: Essentials">
          <span class="none"></span>
        Using TestNG, Part 1: Essentials</a>
            </li>
                
      <li>
  
                          <a href="testng-cookbook.html" title="Using TestNG, Part 2: Cookbook">
          <span class="none"></span>
        Using TestNG, Part 2: Cookbook</a>
            </li>
                
      <li>
  
                          <a href="ctl.html" title="Using CTL Scripts">
          <span class="none"></span>
        Using CTL Scripts</a>
            </li>
                              <li class="nav-header">About</li>
                              
      <li>
  
                          <a href="relnotes.html" title="Release Notes">
          <span class="none"></span>
        Release Notes</a>
            </li>
            </ul>
              
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                        
        <div id="bodyColumn"  class="span9" >
                                  
            <h1>Installation</h1>
<div class="section">
<h2><a name="Quick_install"></a>Quick install</h2>
<p>The <tt>teamengine-virtualization</tt> module enables the automatic creation of a fully provisioned server image that can be run on a virtualization platform. Currently only VirtualBox is supported, but support for several other dynamic infrastructure platforms will be added in the future. See the <a href="./virt-guide.html">Virtualization Guide</a> for instructions.</p>
<p>The <a class="externalLink" href="https://github.com/opengeospatial/teamengine-builder">TEAM Engine Builder project</a> provides another way to build TEAM Engine and OGC test suites. Shell scripts for Windows and Unix-like systems are available. Detailed instructions are provided in the tutorial.</p></div>
<div class="section">
<h2><a name="Download_and_build_from_source"></a>Download and build from source</h2>
<div class="section">
<h3><a name="Prerequisites"></a>Prerequisites</h3>

<ul>
  
<li><b>Java 8</b>: Download the Java JDK (Java Development Kit) 8, from <a class="externalLink" href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html">http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a>.</li>
  
<li><b>Apache Maven</b>: Download the latest release from <a class="externalLink" href="https://maven.apache.org/download.cgi">https://maven.apache.org/download.cgi</a>.</li>
  
<li><b>Git</b>: Download the Git VCS (version 1.8 or newer) from <a class="externalLink" href="https://git-scm.com/download/">https://git-scm.com/download/</a></li>
  
<li><b>Apache Tomcat 7</b>: It has been tested with Tomcat 7.0; the latest release is available from <a class="externalLink" href="http://tomcat.apache.org/download-70.cgi">http://tomcat.apache.org/download-70.cgi</a>.</li>
</ul></div>
<div class="section">
<h3><a name="Getting_the_Source_Code"></a>Getting the Source Code</h3>
<p>The source code is available from <a class="externalLink" href="https://github.com/opengeospatial/teamengine">GitHub</a>. Use a Git client to clone the repository and checkout a branch or a tagged release as indicated below:</p>

<div class="source">
<div class="source"><pre class="prettyprint">git clone https://github.com/opengeospatial/teamengine.git
git checkout ${project.version}
</pre></div></div>
<p><a class="externalLink" href="http://maven.apache.org/">Apache Maven</a> 3.2.5 or later is required to build the teamengine code base, which currently consists of the following modules:</p>

<ul>
  
<li><b>teamengine-core</b>: Main CTL script processor</li>
  
<li><b>teamengine-resources</b>: Includes shared resources such as stylesheets  and schemas</li>
  
<li><b>teamengine-spi</b>: Provides an extensibility framework and a REST-like  API for test execution</li>
  
<li><b>teamengine-realm</b>: A custom Tomcat user realm</li>
  
<li><b>teamengine-web</b>: A web application for executing test suites and  browsing test results</li>
  
<li><b>teamengine-console</b>: A console application that provides a command-line interface  for executing test suites in Unix and Windows environments.</li>
  
<li><b>teamengine-virtualization</b>: Enables the automatic creation of virtualization  images using <a class="externalLink" href="https://www.packer.io/">Packer</a>.</li>
</ul></div>
<div class="section">
<h3><a name="Building_with_Maven"></a>Building with Maven</h3>
<p>Simply run <tt>mvn package</tt> in the root project directory to generate all build artifacts, or run <tt>mvn install</tt> to install them into the local Maven repository. The main build artifacts are listed below.</p>

<ul>
  
<li><b>teamengine-console-\${project.version}-bin.[zip|tar.gz]</b>: Archive containing the console application (command-line usage)</li>
  
<li><b>teamengine-console-\${project.version}-base.[zip|tar.gz]</b>: Archive containing the initial contents of the teamengine instance directory (TE_BASE)</li>
  
<li><b>teamengine.war</b>: The JEE (Servlet) web application</li>
  
<li><b>teamengine-common-libs.[zip|tar.gz]</b>: Archive containing common runtime dependencies (e.g. JAX-RS 1.1, Apache Derby)</li>
</ul>
<p>Alternatively, build the teamengine-web module and activate the <tt>ogc.cite</tt> profile when doing so; this will automatically add all supporting libraries to the WEB-INF/lib directory in the WAR file. Specify the desired version of the ets-resources project in the user-specific Maven settings file located at <tt>${user.home}/.m2/settings.xml</tt>. See the <a class="externalLink" href="https://github.com/opengeospatial/ets-resources">ets-resources project at GitHub</a> to determine the latest version number (this is denoted by YY.MM.DD in the listing below).</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!-- ${user.home}/.m2/settings.xml --&gt;
&lt;settings xmlns=&quot;http://maven.apache.org/SETTINGS/1.1.0&quot; 
  &lt;!-- other elements omitted --&gt;
  &lt;profiles&gt;
    &lt;profile&gt;
      &lt;id&gt;ogc.cite&lt;/id&gt;
      &lt;!-- Activate profile by default or using the -P option
      &lt;activation&gt;
        &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;
      &lt;/activation&gt;
      --&gt;
      &lt;properties&gt;
        &lt;ets-resources-version&gt;YY.MM.DD&lt;/ets-resources-version&gt;
      &lt;/properties&gt;
    &lt;/profile&gt;
  &lt;/profiles&gt;
&lt;/settings&gt;
</pre></div></div>
<p>A simpler alternative is to activate the profile and specify the property using only command-line options:</p>

<div class="source">
<div class="source"><pre class="prettyprint">mvn package -P ogc.cite -Dets-resources-version=YY.MM.DD
</pre></div></div>
<p>The site documentation can be generated by simply executing the &#x2018;mvn site&#x2019; phase against the top-level POM. An aggregrate PDF document is also created and placed in the target/pdf directory.</p></div>
<div class="section">
<h3><a name="Setting_up_an_instance_directory_TE_BASE"></a>Setting up an instance directory (TE_BASE)</h3>
<p>The value of the <tt>TE_BASE</tt> system property or environment variable specifies the location of the instance directory that contains several essential sub-directories. Create the TE_BASE directory (e.g. /srv/teamengine) and unpack the contents of the teamengine-console-\${project.version}-base archive into this location; make sure that users (including the Tomcat user) have write access. The structure of the TE_BASE directory is shown below.</p>

<div class="source">
<div class="source"><pre class="prettyprint">TE_BASE
  |-- config.xml    # main configuration file
  |-- resources/    # shared test suite resources
      |-- site      # site-specific HTML (welcome, title, etc.)
      |-- lib       # libraries required by some test (e.g. TestNG tests)
  |-- scripts/      # CTL test scripts
  |-- work/         # teamengine work directory
  +-- users/
     |-- {user1}/   # user account details and test run results
     |-- {user2}/
     +-- ...
</pre></div></div>
<p>CTL test scripts are placed in the TE_BASE/scripts directory. As a convenience, the shell script <tt>setup-tebase</tt> is provided as part of the <a class="externalLink" href="https://github.com/opengeospatial/ets-resources">ets-resources</a> project; it may be run to initialize the instance directory with a set of test suites specified in a CSV file. Note that in order to run the script Maven and Git must be installed and available on the system path.</p>
<p>The location of a CSV file is passed as the first argument to the script. Each line in the file should contain two fields: a Git repository URL, and a tag name.</p>

<div class="source">
<div class="source"><pre class="prettyprint">https://github.com/opengeospatial/ets-gml32.git,1.21
https://github.com/opengeospatial/ets-wfs20.git,1.19
https://github.com/opengeospatial/ets-wfs11.git,1.24
https://github.com/opengeospatial/ets-cat30.git,0.9
...
</pre></div></div>
<p>Running the script will populate the TE_BASE/scripts directory with the listed test suites, add all required dependencies to TE_BASE/resources/lib (for command line usage). See the <a class="externalLink" href="https://github.com/opengeospatial/ets-resources">project README</a> for details.</p></div>
<div class="section">
<h3><a name="Deploying_the_web_application"></a>Deploying the web application</h3>
<div class="section">
<h4><a name="System_requirements"></a>System requirements</h4>

<ul>
  
<li>Java runtime: Oracle JDK 8 - <a class="externalLink" href="http://www.oracle.com/technetwork/java/javase/downloads/">latest JDK release</a></li>
  
<li>Servlet container: Apache Tomcat 7.0 - <a class="externalLink" href="http://tomcat.apache.org/download-70.cgi">latest Tomcat release</a></li>
</ul></div>
<div class="section">
<h4><a name="Create_a_dedicated_Tomcat_instance"></a>Create a dedicated Tomcat instance</h4>
<p>Apache Tomcat 7.0 is a supported servlet container. It is <b>strongly</b> recommended that a dedicated Tomcat instance be created to host the teamengine application. That is, keep the instance-specific data&#x2013;referred to as <tt>CATALINA_BASE</tt> in the Tomcat documentation&#x2013;separate from the Tomcat software installation (CATALINA_HOME). Create it as outlined below for the applicable operating system.</p>
<p>To create a CATALINA_BASE directory in Windows:</p>

<div class="source">
<div class="source"><pre class="prettyprint">mkdir base-1 &amp; cd base-1
xcopy %CATALINA_HOME%\conf conf\
mkdir lib logs temp webapps work
</pre></div></div>
<p>In a Unix-like environment:</p>

<div class="source">
<div class="source"><pre class="prettyprint">sudo mkdir -p /srv/tomcat/base-1; cd /srv/tomcat/base-1
sudo cp -r $CATALINA_HOME/conf .
sudo mkdir lib logs temp webapps work
</pre></div></div>
<p>The recommended JVM options for the Tomcat instance are shown below. Note that the maximum memory heap size (<tt>-Xmx</tt>) may need to be increased as the number of concurrent users increases.</p>
<p><tt>CATALINA_OPTS=&quot;-server -Xmx1024m -XX:MaxPermSize=128m -DTE_BASE=$TE_BASE -Dderby.system.home=$DERBY_DATA&quot;</tt></p>
<p>Unpack the contents of the teamengine-common-libs archive into the CATALINA_BASE/lib directory. Deploy the <tt>teamengine.war</tt> component by either copying it into the CATALINA_BASE/webapps directory or using the Tomcat <i>Manager</i> application. Start the Tomcat instance.</p>
<p>The URIs listed below provide starting points for discovering and executing test suites. Modify the path if the name of the WAR file (and hence the context path) has been changed from the default value &#x201c;teamengine&#x201d;.</p>

<ul>
  
<li><tt>/teamengine</tt>: Home page for selecting and running CTL test suites</li>
  
<li><tt>/teamengine/rest/suites</tt>: Presents a listing of available (TestNG) test suites, with links to test suite documentation</li>
</ul></div></div>
<div class="section">
<h3><a name="Installations_of_tests_in_TEAM_ENGINE"></a>Installations of tests in TEAM ENGINE</h3>
<p>There are various examples of tests that can be installed in TEAM Engine. For example.</p>

<ul>
  
<li><a class="externalLink" href="https://github.com/opengeospatial/ets-gml32">GML 3.2.1</a></li>
  
<li><a class="externalLink" href="https://github.com/opengeospatial/ets-wms13">WMS 1.3</a></li>
</ul>
<p>Even though the first one uses TestNG and the second uses CTL, they both follow maven best practice conventions and are build and treated the same way when installing them in TEAM Engine. To download and install a test do the following steps:</p>

<ol style="list-style-type: decimal">
  
<li>checkout the test repository: e.g. <tt>git clone  https://github.com/opengeospatial/ets-gml32.git</tt></li>
  
<li>go inside the project&quot; <tt>cd ets-gml32</tt></li>
  
<li>checkout a specific version. e.g. for 1.23 <tt>git checkout 1.123</tt></li>
  
<li>build using maven <tt>mvn clean install</tt></li>
  
<li>check that the build is succesful. You should see a <b>BUILD SUCCESS</b> text in the terminal</li>
  
<li>go to the target folder <tt>cd target</tt></li>
  
<li>unzip the archive file that ends with <i>ctl.zip</i> to $TE_BASE/scripts</li>
  
<li>unzip the archive file that ends with <i>deps.zip</i> to $TE_BASE/resources/lib</li>
</ol></div>
<div class="section">
<h3><a name="Customizing_the_welcome_page"></a>Customizing the welcome page</h3>
<p>Several elements of the welcome page may be changed if desired: the logo in the header, the main text, and the content in the footer. The files located in the TE_BASE/resources/site directory can be modified to provide site-specific content:</p>

<ul>
  
<li><b>site/logo.png</b>: The logo that appears in the header (at top left). The size of the default image is 127x58 px.</li>
  
<li><b>site/welcome.txt</b>: The main text.</li>
  
<li><b>site/footer.txt</b>: Footer content.</li>
  
<li><b>site/title.html</b>: Title of the web application</li>
</ul>
<p>An alias path must be added to the <a class="externalLink" href="https://tomcat.apache.org/tomcat-7.0-doc/config/context.html">web application context</a> in order to make the site-specific content visible. Append the <tt>/site</tt> alias to the aliases attribute value in the META-INF/context.xml file as shown below. Reload the application (or restart Tomcat) to enable the new alias.</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;Context aliases=&quot;...,/site=${TE_BASE}/resources/site&quot;&gt;
</pre></div></div></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                    2016
                        <a href="http://www.opengeospatial.org/">Open Geospatial Consortium</a>.
            All rights reserved.    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
